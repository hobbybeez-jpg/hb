<!doctype html>
title={emp.name}
>
<span className="hidden sm:inline truncate">{emp.name}</span>
<span className="font-semibold sm:hidden">{(emp.name||'').slice(0,3).toUpperCase()}</span>
{!readOnly && (
<button className="ml-1 text-slate-500 hover:text-red-500" onClick={()=>clearRole(role)} title="清除">✕</button>
)}
</div>
) : (
<div className="text-xs text-slate-400 select-none">拖拉員工到此</div>
)}
</div>
);
};


return (
<div ref={ref} className={("min-h-36 rounded-2xl border p-2 flex flex-col gap-2 bg-white ") +
(isHL? ' ring-4 ring-blue-400 border-blue-400' : ' border-slate-200') + (isVacHL ? ' outline outline-2 outline-rose-400' : '')}
title={isWeekend(year, month, d) ? '假日 6 小時' : '平日 7 小時'}>
<div className="flex items-center justify-between text-xs text-slate-500">
<span className="font-medium text-slate-700">{d}</span>
{!readOnly && ( <span className="px-1 py-0.5 rounded bg-slate-100">{h} 小時</span> )}
</div>


{/* Staff 名單 */}
<div className="flex-1 pr-1">
{asg.staff.length === 0 ? (
!readOnly ? ( <div className="text-xs text-slate-300 select-none">可拖曳名牌到此</div> ) : ( <div className="h-4"></div> )
) : (
<ul className="flex flex-col gap-1">
{asg.staff.map((empId) => {
const emp = empList.find(e => e.id === empId); if (!emp) return null;
const isThisHL = highlightEmpId === empId;
const color = getEmpColor(empId);
const ring = isThisHL ? 'ring-2 ring-blue-300' : '';
const vacToday = isVacation(empId, year, month, d);
return (
<li key={empId}
className={("group flex items-center gap-1 text-[11px] leading-tight px-2 py-0.5 rounded-md border " + color + ' ' + ring + (vacToday ? ' border-rose-500' : ''))}
draggable={!readOnly}
onDragStart={(e)=>onDragStartFromCell(e, empId, d)}
title={emp.name}
>
<span className="flex items-center gap-1 whitespace-nowrap">
<span className="font-semibold sm:hidden">{(emp.name || '').slice(0,3).toUpperCase()}</span>
<span className="hidden sm:inline truncate">{emp.name}</span>
</span>
{vacToday && <span className="ml-1 text-[10px] text-rose-700" title="該員工今日休假">休</span>}
{!readOnly && (
<button className="ml-auto opacity-0 group-hover:opacity-100 transition text-slate-500 hover:text-red-500" onClick={()=>onRemoveStaff(empId)} title="移除">✕</button>
)}
</li>
);
})}
</ul>
)}
</div>


{/* 角色欄位 */}
<div className="grid grid-cols-1 gap-1">
{ROLE_LIST.map(r => <RoleBox key={r} role={r} />)}
</div>
</div>
);
}


ReactDOM.createRoot(document.getElementById('root')).render(<App/>);
</script>
</body>
</html>
